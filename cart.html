<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Cart | Kairavi‚Äôs Oven Magic</title>
  <link rel="icon" href="images/logo.png"/>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>

  <div class="freebar">FREE delivery over ‚Çπ999 ‚Ä¢ Pune city
    <a href="products.html">Shop more ‚Üí</a>
  </div>

  <header class="site-header">
    <div class="wrap nav">
      <a class="brand" href="index.html"><img src="images/logo.png" alt="logo"><strong>Kairavi‚Äôs Oven Magic</strong></a>
      <nav class="menu">
        <a href="index.html">Home</a>
        <a href="products.html">Products</a>
        <a href="contact.html">Contact</a>
        <a href="cart.html">Cart</a>
      </nav>
    </div>
  </header>

  <section class="section">
    <div class="wrap">
      <h2>Your Cart</h2>
      <p class="sub">Review items and place the order on WhatsApp.</p>

      <table class="cart-table" id="cartTable">
        <thead>
          <tr><th>Product</th><th>Weight</th><th>Qty</th><th>Price</th><th>Total</th><th></th></tr>
        </thead>
        <tbody></tbody>
      </table>

      <div class="cart-summary">
        <div id="cartNote" class="sub"></div>
        <div>Total: ‚Çπ<span id="grandTotal">0</span></div>
      </div>

      <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
        <a class="btn btn-ghost" href="products.html">Continue Shopping</a>
        <a class="btn btn-primary" id="waCheckout" href="#" target="_blank">Order on WhatsApp</a>
        <button class="btn" id="clearCart" style="background:#eee;color:#333">Clear Cart</button>
      </div>
    </div>
  </section>

  <footer>
    <div class="wrap footer-grid">
      <div class="small">¬© 2025 Kairavi‚Äôs Oven Magic ‚Äî Kairavi Food Products</div>
      <div class="small" style="text-align:right">Email: <a href="mailto:kairavisovenmagic@gmail.com">kairavisovenmagic@gmail.com</a></div>
    </div>
  </footer>

  <a class="whatsapp-float" href="https://wa.me/919766964845" target="_blank" aria-label="WhatsApp">
    <img src="images/whatsapp.png" alt="WhatsApp"/>
  </a>

  <script>
    const CART_KEY='kom_cart';
    const getCart=()=>JSON.parse(localStorage.getItem(CART_KEY)||'[]');
    const setCart=c=>localStorage.setItem(CART_KEY,JSON.stringify(c));

    const tbody=document.querySelector('#cartTable tbody');
    const totalEl=document.getElementById('grandTotal');
    const waBtn=document.getElementById('waCheckout');
    const clearBtn=document.getElementById('clearCart');
    const note=document.getElementById('cartNote');

    function render(){
      const cart=getCart();
      tbody.innerHTML='';
      let grand=0;
      cart.forEach((row,i)=>{
        const sum=row.price*row.qty; grand+=sum;
        const tr=document.createElement('tr');
        tr.innerHTML=`
          <td>${row.name}</td>
          <td>${row.weight}</td>
          <td>
            <div class="qty-control">
              <button class="minus">‚àí</button>
              <span class="count">${row.qty}</span>
              <button class="plus">+</button>
            </div>
          </td>
          <td>‚Çπ${row.price}</td>
          <td>‚Çπ${sum}</td>
          <td><button class="remove" title="Remove">üóëÔ∏è</button></td>
        `;
        tr.querySelector('.minus').onclick=()=>{if(row.qty>1){row.qty--;setCart(cart);render()}};
        tr.querySelector('.plus').onclick =()=>{if(row.qty<99){row.qty++;setCart(cart);render()}};
        tr.querySelector('.remove').onclick=()=>{cart.splice(i,1);setCart(cart);render()};
        tbody.appendChild(tr);
      });
      totalEl.textContent=grand;
      note.textContent = grand>=999? 'üéâ You qualify for FREE delivery in Pune!':'Add more to reach ‚Çπ999 for free delivery in Pune.';
      const text=encodeURIComponent(cart.map(r=>`${r.name} (${r.weight}) x ${r.qty} = ‚Çπ${r.qty*r.price}`).join('%0A')+`%0A%0ATotal: ‚Çπ${grand}%0AName:%0AAddress:%0APayment mode:`);

      waBtn.href=`https://wa.me/919766964845?text=${text}`;
    }

    clearBtn.onclick=()=>{if(confirm('Clear cart?')){setCart([]);render()}};
    render();
  </script>
</body>
</html>
