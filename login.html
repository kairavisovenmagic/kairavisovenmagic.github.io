<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Login / Sign Up | Kairavi‚Äôs Oven Magic</title>
  <link rel="icon" href="images/logo.png"/>
  <link rel="stylesheet" href="style.css"/>
  <style>
    body{background:url('images/login-bg.jpg')center/cover no-repeat;font-family:Poppins,sans-serif;color:#333;}
    .login-box{max-width:380px;margin:90px auto;background:rgba(255,255,255,.94);border-radius:18px;padding:26px 24px;box-shadow:0 6px 16px rgba(0,0,0,.15);}
    h2{text-align:center;margin-bottom:14px;color:#3b2b22}
    input{width:100%;padding:10px;margin:6px 0;border:1px solid #ccc;border-radius:10px}
    .actions{display:flex;gap:10px;margin-top:10px}
    button{flex:1;border:none;border-radius:10px;padding:10px;font-weight:600;cursor:pointer}
    .login{background:#ff7043;color:#fff}
    .signup{background:#fff;border:2px solid #ff7043;color:#ff7043}
    .status{margin-top:10px;text-align:center;font-size:.9rem}
  </style>
</head>
<body>
  <div class="login-box">
    <h2>Welcome Back üç™</h2>
    <input id="email" type="email" placeholder="Email"/>
    <input id="password" type="password" placeholder="Password"/>
    <div class="actions">
      <button class="login" id="loginBtn">Login</button>
      <button class="signup" id="signupBtn">Sign Up</button>
    </div>
    <div id="status" class="status"></div>
  </div>

  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js';
    import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js';
    import { getFirestore, doc, setDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js';

    const firebaseConfig={apiKey:"AIzaSyCk4rYYxGWI9XBLXiIR1uaIFAnf8WHZP2w",authDomain:"kairavis-oven-magic.firebaseapp.com",projectId:"kairavis-oven-magic",storageBucket:"kairavis-oven-magic.firebasestorage.app",messagingSenderId:"270897232759",appId:"1:270897232759:web:36ee0edc8b222046febf72"};
    const app=initializeApp(firebaseConfig); const auth=getAuth(app); const db=getFirestore(app);
    const email=document.getElementById('email'), pass=document.getElementById('password'), msg=document.getElementById('status');

    document.getElementById('loginBtn').onclick=async()=>{
      try{await signInWithEmailAndPassword(auth,email.value,pass.value);msg.textContent="‚úÖ Login successful";setTimeout(()=>location.href='my-account.html',700);}
      catch(e){msg.textContent=e.message;}
    };
    document.getElementById('signupBtn').onclick=async()=>{
      try{
        const {user}=await createUserWithEmailAndPassword(auth,email.value,pass.value);
        await setDoc(doc(db,'users',user.uid),{email:user.email,role:'user',createdAt:serverTimestamp()});
        msg.textContent="üéâ Account created!";setTimeout(()=>location.href='my-account.html',900);
      }catch(e){msg.textContent=e.message;}
    };
  </script>
</body>
</html>
