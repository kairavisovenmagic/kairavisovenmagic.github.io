<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Admin Dashboard | Kairavi’s Oven Magic</title>
  <link rel="icon" href="images/logo.png"/><link rel="stylesheet" href="style.css"/>
  <style>
    /* same dashboard styles */
  </style>
</head>
<body>
  <div class="freebar">Admin Area • <a href="index.html">Go to Site →</a></div>
  <header class="site-header">
    <div class="wrap nav">
      <a class="brand" href="index.html"><img src="images/logo.png" alt=""><strong>Kairavi’s Oven Magic</strong></a>
      <nav class="menu">
        <a href="index.html">Home</a><a href="products.html">Products</a><a id="loginLink" href="my-account.html">My Account</a><a id="logoutBtn" href="#">Logout</a>
      </nav>
    </div>
  </header>

  <section class="admin-hero"><div class="wrap"><h1>Admin Dashboard</h1><p>View users and orders (Restricted access)</p></div></section>
  <section class="section"><div class="wrap" id="dashboard"></div></section>

  <!-- Firebase Admin Logic (same as provided before) -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js';
    import { getAuth, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js';
    import { getFirestore, getDocs, collection, doc, getDoc } from 'https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js';

    const app = initializeApp({
      apiKey:"AIzaSyCk4rYYxGWI9XBLXiIR1uaIFAnf8WHZP2w",
      authDomain:"kairavis-oven-magic.firebaseapp.com",
      projectId:"kairavis-oven-magic",
      storageBucket:"kairavis-oven-magic.firebasestorage.app",
      messagingSenderId:"270897232759",
      appId:"1:270897232759:web:36ee0edc8b222046febf72"
    });
    const auth=getAuth(app);const db=getFirestore(app);

    const dash=document.getElementById('dashboard');
    onAuthStateChanged(auth,async user=>{
      if(!user){location.href='login.html';return;}
      const meSnap=await getDoc(doc(db,'users',user.uid));
      if(!meSnap.exists()||meSnap.data().role!=='admin'){alert('Admin access only');location.href='index.html';return;}
      dash.innerHTML='<h2>✅ Welcome Admin '+user.email+'</h2><p>Use admin-dashboard.html for full features (search/export).</p>';
    });
  </script>
</body>
</html>
